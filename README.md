# Инструкция по запуску системы Red Team AI-агента

## Предварительные требования

Для запуска системы Red Team AI-агента необходимо установить следующие компоненты:

1. **Python 3.8+** - для запуска бэкенда
2. **Node.js 14+** - для разработки фронтенда (опционально)
3. **Metasploit Framework** - для выполнения команд пентеста
4. **Локальная LLM модель** - для генерации и анализа команд

## Структура проекта

```
red_team_agent/
├── architecture.md           # Описание архитектуры системы
├── pentesting_workflow.md    # Описание рабочего процесса пентестинга
├── validation.md             # Валидация системы
├── backend/
│   ├── app.py                # Основной файл бэкенда Flask
│   └── requirements.txt      # Зависимости Python
├── frontend/
│   ├── index.html            # Основной HTML-файл фронтенда
│   └── interface_design.md   # Описание дизайна интерфейса
└── prompts/
    └── llm_agent_prompt.md   # Инструкции для LLM агента
```

## Установка и настройка

### 1. Установка Metasploit Framework

Если Metasploit Framework еще не установлен, выполните следующие команды:

```bash
# Для Debian/Ubuntu
sudo apt update
snap install metasploit-framework

# Для Kali Linux (уже установлен по умолчанию)
# Обновление до последней версии
sudo apt update
sudo apt upgrade -y metasploit-framework
```

### 2. Настройка локальной LLM модели

Для работы системы требуется локальная LLM модель с API, совместимым с OpenAI. Рекомендуется использовать:

- LM Studio
- Ollama
```bash
curl -fsSL https://ollama.com/install.sh | sh
```
- LocalAI
- или другие решения для запуска локальных LLM моделей

Настройте локальную модель так, чтобы она была доступна по адресу `http://localhost:8000/v1/completions`.

### 3. Установка зависимостей Python

```bash
sudo apt install virtualenv


cd red_team_agent/backend
pip install -r requirements.txt
```

Если файл requirements.txt отсутствует, создайте его со следующим содержимым:

```
flask==2.2.3
flask-socketio==5.3.2
requests==2.28.2
python-engineio==4.3.4
python-socketio==5.7.2
eventlet==0.33.3
```

## Запуск системы

### 1. Запуск Metasploit RPC сервера

```bash
# Запуск Metasploit RPC сервера
msfrpcd -U msf -P password -a 127.0.0.1 -p 55553
```

### 2. Запуск бэкенда

```bash
cd red_team_agent/backend
python app.py
```

Бэкенд будет доступен по адресу `http://localhost:5000`.

### 3. Доступ к веб-интерфейсу

Откройте в браузере адрес `http://localhost:5000` для доступа к веб-интерфейсу Red Team AI-агента.

## Использование системы

1. **Ввод цели** - введите URL или IP-адрес цели в поле "Target URL/IP"
2. **Запуск пентеста** - нажмите кнопку "Start Pentest"
3. **Мониторинг процесса** - следите за процессом пентестинга в реальном времени
4. **Управление процессом** - используйте кнопки "Pause", "Resume" и "Stop" для управления процессом
5. **Анализ результатов** - просматривайте обнаруженные уязвимости и анализ LLM
6. **Генерация отчета** - после завершения пентеста сгенерируйте отчет

## Настройка системы

### Настройка Metasploit RPC

В файле `backend/app.py` можно изменить настройки подключения к Metasploit RPC:

```python
msfrpc_config = {
    "host": "127.0.0.1",
    "port": 55553,
    "username": "msf",
    "password": "password",
    "ssl": False
}
```

### Настройка LLM модели

В файле `backend/app.py` можно изменить настройки подключения к LLM модели:

```python
llm_config = {
    "endpoint": "http://localhost:8000/v1/completions",
    "model": "local_llm_model",
    "max_tokens": 1000,
    "temperature": 0.2
}
```

## Безопасность

Система Red Team AI-агента предназначена для использования только в тестовых средах и на системах, для которых у вас есть разрешение на проведение тестирования на проникновение. Использование системы для атаки на неавторизованные цели является незаконным и неэтичным.

## Расширение функциональности

Система спроектирована модульно и может быть расширена:

1. **Добавление новых модулей Metasploit** - расширение возможностей пентестинга
2. **Улучшение LLM промпта** - повышение точности генерации команд и анализа
3. **Расширение веб-интерфейса** - добавление новых визуализаций и функций
4. **Интеграция с другими инструментами** - добавление поддержки других инструментов пентестинга

## Устранение неполадок

### Проблемы с подключением к Metasploit RPC

1. Убедитесь, что Metasploit RPC сервер запущен
2. Проверьте настройки подключения в файле `backend/app.py`
3. Проверьте, не блокирует ли файрвол порт 55553

### Проблемы с LLM моделью

1. Убедитесь, что локальная LLM модель запущена и доступна
2. Проверьте настройки подключения в файле `backend/app.py`
3. Убедитесь, что модель поддерживает API, совместимый с OpenAI

### Проблемы с веб-интерфейсом

1. Проверьте консоль браузера на наличие ошибок JavaScript
2. Убедитесь, что WebSocket соединение установлено
3. Перезагрузите страницу и попробуйте снова
